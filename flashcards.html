<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>水利工程监理考点抽认卡预览</title>
    <style>
        body { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; background-color: #f0f2f5; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .card-container { perspective: 1000px; width: 90%; max-width: 500px; height: 300px; margin-top: 50px; cursor: pointer; }
        .card { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-radius: 15px; }
        .card.is-flipped { transform: rotateY(180deg); }
        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; padding: 30px; box-sizing: border-box; border-radius: 15px; font-size: 1.2rem; line-height: 1.6; }
        .card-front { background-color: #ffffff; color: #333; }
        .card-back { background-color: #1890ff; color: white; transform: rotateY(180deg); }
        .controls { margin-top: 30px; display: flex; gap: 20px; }
        button { padding: 10px 20px; font-size: 1rem; cursor: pointer; border: none; border-radius: 5px; background-color: #1890ff; color: white; transition: background 0.3s; }
        button:hover { background-color: #40a9ff; }
        .info { margin-top: 20px; color: #666; }
    </style>
</head>
<body>
    <h1>水利工程监理考点抽认卡</h1>
    <div class="info" id="counter">正在加载...</div>
    
    <div class="card-container" onclick="flipCard()">
        <div class="card" id="card">
            <div class="card-face card-front" id="front">点击开始复习</div>
            <div class="card-face card-back" id="back">点击翻转查看答案</div>
        </div>
    </div>

    <div class="controls">
        <button onclick="prevCard()">上一个</button>
        <button onclick="nextCard()">下一个</button>
        <button onclick="randomCard()">随机</button>
    </div>

    <script>
        let cards = [];
        let currentIndex = 0;

        async function loadCards() {
            const response = await fetch('water_conservancy_flashcards.csv');
            const text = await response.text();
            const lines = text.split('\n');
            cards = lines.filter(line => line.trim() !== '').map(line => {
                const parts = line.split(',');
                return { front: parts[0], back: parts[1] };
            });
            updateCard();
        }

        function updateCard() {
            if (cards.length === 0) return;
            document.getElementById('card').classList.remove('is-flipped');
            setTimeout(() => {
                document.getElementById('front').innerText = cards[currentIndex].front;
                document.getElementById('back').innerText = cards[currentIndex].back;
                document.getElementById('counter').innerText = `考点 ${currentIndex + 1} / ${cards.length}`;
            }, 100);
        }

        function flipCard() {
            document.getElementById('card').classList.toggle('is-flipped');
        }

        function nextCard() {
            currentIndex = (currentIndex + 1) % cards.length;
            updateCard();
        }

        function prevCard() {
            currentIndex = (currentIndex - 1 + cards.length) % cards.length;
            updateCard();
        }

        function randomCard() {
            currentIndex = Math.floor(Math.random() * cards.length);
            updateCard();
        }

        loadCards();
    </script>
</body>
</html>
